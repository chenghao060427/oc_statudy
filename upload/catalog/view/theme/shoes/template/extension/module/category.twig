<div class="box box-with-categories   category-box-type-2 box-no-advanced">
    <div class="box-heading">{{ catagories_name }}</div>
    <div class="strip-line"></div>
    <div class="box-content box-category">
        <ul class="accordion" id="accordion-category">
            {% for category in categories %}
                {% if category.category_id == category_id %}

                        <li class="panel">
                            <a href="{{ category.href }}" class="active">{{ category.name }}</a>
                            {% if category.children %}
                                <span class="head">
                                    <a style="float:right;padding-right:5px" class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-category" href="#category{{ loop.index }}">
                                        <span class="plus">+</span>
                                        <span class="minus">-</span>
                                    </a>
                                </span>
                                <div id="category{{ loop.index }}" class="panel-collapse collapse in" style="clear:both">
                                    <ul>
                                        {% for child in category.children %}
                                            <li>
                                                {% if child.category_id == child_id %}
                                                    <a href="{{ child.href }}" class="active"> {{ child.name }}</a>
                                                {% else %}
                                                    <a href="{{ child.href }}"> {{ child.name }}</a>
                                                {% endif %}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}
                        </li>
                {% else %}
                    <li class="panel">
                    <a href="{{ category.href }}">{{ category.name }}</a>
                        {% if category.children %}
                            <span class="head">
                                    <a style="float:right;padding-right:5px" class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion-category" href="#category{{ loop.index }}">
                                        <span class="plus">+</span>
                                        <span class="minus">-</span>
                                    </a>
                                </span>
                            <div id="category{{ loop.index }}" class="panel-collapse collapse" style="clear:both">
                                <ul>
                                    {% for child in category.children %}
                                        <li>
                                            {% if child.category_id == child_id %}
                                                <a href="{{ child.href }}" class="active"> {{ child.name }}</a>
                                            {% else %}
                                                <a href="{{ child.href }}"> {{ child.name }}</a>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                {% endif %}

            {% endfor %}

        </ul>
    </div>
</div>
<script type="text/javascript">
    MegaFilter.prototype.beforeRequest = function() {
        var self = this;
    };

    MegaFilter.prototype.beforeRender = function( htmlResponse, htmlContent, json ) {
        var self = this;
    };

    MegaFilter.prototype.afterRender = function( htmlResponse, htmlContent, json ) {
        var self = this;
    };
</script>